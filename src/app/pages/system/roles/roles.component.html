

<!-- <div class="card"> -->
  <!-- <p-toolbar styleClass="mb-4">
    <ng-template pTemplate="left">
      <button pButton pRipple label="Nuevo Rol" icon="pi pi-plus" class="p-button-success mr-2" (click)=></button>
    </ng-template>
    </p-toolbar> -->
 <p-toolbar styleClass="mb-6">
        <ng-template pTemplate="start">
          <p-button label="Nuevo" icon="pi pi-plus" class="p-button-success mr-2" class="mr-2" (onClick)="openCreateRoleModal()"></p-button>
        </ng-template>
        
        <!-- <ng-template pTemplate="end">
              <p-button #btnPfiltros label="Filtros" icon="pi pi-filter"
              severity="secondary" (click)="toggleFilterPanel($event, btnPfiltros.el.nativeElement)">
            </p-button>
        </ng-template> -->
        
        
      </p-toolbar>
  <p-table
    #dtRoles
    [value]="store.roles()"
    [tableStyle]="{ 'min-width': '50rem' }"
    [paginator]="false" [rows]="10" [showCurrentPageReport]="store.roles().length > 10" responsiveLayout="scroll"
    [rowHover]="true"
    dataKey="id"
    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} roles"
    [globalFilterFields]="['id', 'name', 'guard_name']"
    styleClass="p-datatable-customers p-datatable-gridlines">

    <!-- <ng-template pTemplate="caption">
      <div class="flex align-items-center justify-content-between">
        <h5 class="m-0 font-bold text-xl">GESTIÓN DE ROLES</h5>
        <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input #gbRoleInput pInputText type="text" [(ngModel)]="globalTableFilterValue"
                   (input)="onGlobalTableFilter(dtRoles, $event)" placeholder="Buscar en tabla..."
                   class="w-full sm:w-auto"/>
            <button *ngIf="globalTableFilterValue" pButton icon="pi pi-times"
                    class="p-button-text p-button-rounded ml-1" (click)="clearGlobalTableFilter(dtRoles, gbRoleInput)"
                    pTooltip="Limpiar búsqueda" tooltipPosition="top"></button>
        </span>
      </div>
    </ng-template> -->

    <ng-template #caption>
                <div class="flex items-center justify-between">
                    <p class="font-bold font-mono text-2xl py-1" >GESTION DE ROLES</p>
                    
                </div>
    </ng-template>

    <ng-template pTemplate="header">
      <tr>
        <th style="width:5%" pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
        <th pSortableColumn="name" style="width:auto">Nombre del Rol <p-sortIcon field="name"></p-sortIcon></th>
        <!-- <th pSortableColumn="guard_name" style="width:20%">Guard Name <p-sortIcon field="guard_name"></p-sortIcon></th> -->
        <th pSortableColumn="acciones" style="width:auto; text-align: center;">Acciones</th> </tr>
    </ng-template>

    <ng-template pTemplate="body" let-role>
      <tr>
        <td>{{ role.id }}</td>
        <td>{{ role.name | titlecase }}</td>
        <!-- <td>{{ role.guard_name }}</td> -->
        <td>
           <div class="flex gap-2 justify-center" >
            <p-button icon="pi pi-pencil"
                    [rounded]="true" [outlined]="true"
                    (click)="openEditRoleModal(role)"
                    pTooltip="Editar Rol" tooltipPosition="top"></p-button>
            <p-button icon="pi pi-lock-open" [rounded]="true" [outlined]="true" severity="warn" 
                    (click)="openAssignPermissionsModal(role)"
                    pTooltip="Asignar Permisos" tooltipPosition="top"></p-button>
            <p-button icon="pi pi-trash"
                    severity="danger" [rounded]="true" [outlined]="true"
                    (click)="confirmDeleteRole(role)"
                    pTooltip="Eliminar Rol" tooltipPosition="top"></p-button>
          </div>  
        </td>      
        
        
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="4" class="text-center">No se encontraron roles.</td> </tr>
    </ng-template>
    <ng-template pTemplate="loadingbody"> <tr>
            <td colspan="4" class="text-center">Cargando roles...</td> </tr>
    </ng-template>
  </p-table>
<!-- </div> -->


<app-create />
<app-edit />
<app-permiso />
<p-toast></p-toast>
<p-confirmDialog acceptLabel="Sí" rejectLabel="No"></p-confirmDialog>
