<p-popover #popFiltrosProducto
                [dismissable]="true"
                appendTo="body"
                [style]="{width: '380px'}"
                styleClass="product-filters-overlay"> <div class="p-4"> <h3 class="text-xl font-semibold mb-4">Filtrar Productos</h3>

    <div class="p-fluid grid gap-y-4">

      <div class="field col-12">
        <label for="overlayFilterProdNombre" class="block text-sm font-medium text-gray-700 mb-1">Nombre Producto</label>
        <input id="overlayFilterProdNombre" type="text" pInputText [(ngModel)]="localFilters.nombre" placeholder="Buscar por nombre" class="w-full">
      </div>

      <div class="field col-12">
        <label for="overlayFilterProdTalla" class="block text-sm font-medium text-gray-700 mb-1">Talla</label>
        <input id="overlayFilterProdTalla" type="text" pInputText [(ngModel)]="localFilters.talla" placeholder="Buscar por talla" class="w-full">
      </div>

      <div class="field col-12">
        <label for="overlayFilterProdStatus" class="block text-sm font-medium text-gray-700 mb-1">Estado</label>
        <p-dropdown id="overlayFilterProdStatus"
                    [options]="statusOptions"
                    [(ngModel)]="localFilters.status"
                    placeholder="Seleccionar estado"
                    optionLabel="label"
                    optionValue="value"
                    [showClear]="localFilters.status !== 'active'"
                    appendTo="body" styleClass="w-full"
                    [panelStyleClass]="'w-full min-w-fit'">
        </p-dropdown>
      </div>

      <div class="field col-12">
        <label for="overlayFilterProdCategoria" class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
        <p-dropdown id="overlayFilterProdCategoria"
                    [options]="categoriaStore.categoriasDropdownOptions()"
                    [(ngModel)]="localFilters.categoria_id"
                    placeholder="Seleccionar categoría"
                    optionLabel="nombre"
                    optionValue="id"
                    [filter]="true"
                    (onFilter)="onCategoriaFilterInPanel($event)"
                    [showClear]="true"
                    appendTo="body" styleClass="w-full" [panelStyleClass]="'w-full min-w-fit'"
                    scrollHeight="200px">
          <ng-template pTemplate="emptyfilter">No se encontraron categorías con "{{lastCategoriaSearchTerm}}".</ng-template>
          <ng-template pTemplate="empty">Escriba para buscar o no hay categorías.</ng-template>
        </p-dropdown>
      </div>
    </div>

    <div class="flex justify-end space-x-2 pt-4 mt-4 border-t">
      <p-button label="Limpiar" icon="pi pi-filter-slash" styleClass="p-button-text p-button-sm" (click)="clearFiltersAndApply()"></p-button>
      <p-button label="Aplicar" icon="pi pi-check" styleClass="p-button-sm" (click)="applyFilters()"></p-button>
    </div>
  </div>
</p-popover>